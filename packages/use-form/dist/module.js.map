{"mappings":"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","sources":["packages/use-form/src/index.ts","packages/use-form/src/useForm.ts","packages/use-form/src/lib/url.js","packages/use-form/src/lib/types.js","packages/use-form/src/lib/files.js","packages/use-form/src/lib/formData.js","packages/use-form/src/useData.ts"],"sourcesContent":["export {default as useForm} from './useForm';\nexport {default as useData} from './useData';\n","import {useCallback, useEffect, useRef, useState} from 'react'\nimport isEqual from 'lodash/isEqual';\nimport get from 'lodash/get';\nimport {hrefToUrl, mergeDataIntoQueryString, urlWithoutHash} from './lib/url';\nimport {Method} from './lib/types';\nimport {hasFiles} from \"./lib/files\";\nimport {objectToFormData} from \"./lib/formData\";\nimport axios from \"axios\";\n\ntype VisitConfig = {\n    method: string\n    data: object,\n    replace: boolean,\n    headers: object,\n    errorBag: string\n    forceFormData: boolean,\n    onCancelToken: () => any,\n    onBefore: (visit) => any,\n    onStart: (visit) => any,\n    onProgress: (percent) => any,\n    onFinish: () => any,\n    onSuccess: (data) => any,\n    onError: (errors) => any,\n    queryStringArrayFormat: string\n};\n\nexport const Visitor = {\n    visit(href, {\n        method = Method.GET,\n        data = {},\n        replace = false,\n        headers = {},\n        errorBag = '',\n        forceFormData = false,\n        onCancelToken = () => {\n        }, onBefore = () => {\n        }, onStart = () => {\n        }, onProgress = () => {\n        }, onFinish = () => {\n        }, onSuccess = (response) => {\n            return response;\n        }, onError = () => {\n        }, queryStringArrayFormat = 'brackets',\n    }: VisitConfig) {\n        let url = typeof href === 'string' ? hrefToUrl(href) : href;\n\n        if (this.activeVisit && this.activeVisit.processing) {\n            return;\n        }\n\n        // Create form data if has files\n        if ((hasFiles(data) || forceFormData) && !(data instanceof FormData)) {\n            data = objectToFormData(data);\n        }\n\n        // If not FormData,\n        if (!(data instanceof FormData)) {\n            const [_href, _data] = mergeDataIntoQueryString(method, url, data, queryStringArrayFormat);\n            url = hrefToUrl(_href);\n            data = _data\n        }\n\n        const visit: {\n            url: string,\n            method: string,\n            data: any,\n            replace: any,\n            headers: any,\n            errorBag: any,\n            forceFormData: boolean,\n            queryStringArrayFormat: string,\n            completed: boolean,\n            interrupted: boolean,\n            cancelled: boolean,\n        } = {\n            url,\n            method,\n            data,\n            replace,\n            headers,\n            errorBag,\n            forceFormData,\n            queryStringArrayFormat,\n            completed: false,\n            interrupted: false,\n            cancelled: false,\n        };\n\n        this.activeVisit = Object.assign(Object.assign({}, visit), {onCancelToken, onBefore, onStart, onProgress, onFinish, onSuccess, onError, queryStringArrayFormat});\n\n        if (onBefore(visit) === false) {\n            return;\n        }\n\n        onStart(visit);\n\n        return new Promise((resolve, reject) => {\n            // @ts-ignore\n            return axios({\n                method: method,\n                url: urlWithoutHash(url).href,\n                data: method === Method.GET ? {} : data,\n                params: method === Method.GET ? data : {},\n                headers: Object.assign(Object.assign({}, headers), {'X-Requested-With': 'XMLHttpRequest'}),\n                onUploadProgress: progress => {\n                    if (data instanceof FormData) {\n                        progress.percentage = Math.round(progress.loaded / progress.total * 100);\n                        onProgress(progress);\n                    }\n                },\n            }).then((response) => {\n                const errors = get(response, 'data.errors', {}) || {};\n\n                if (this.activeVisit) {\n                    this.finishVisit(this.activeVisit);\n                }\n\n                if (Object.keys(errors).length > 0) {\n                    const scopedErrors = errorBag ? (errors[errorBag] ? errors[errorBag] : {}) : errors;\n                    return onError(scopedErrors);\n                }\n\n                onSuccess(response.data);\n\n                return resolve(response.data);\n            }).catch((error) => {\n                const errors = get(error, 'response.data.errors', {});\n\n                if (this.activeVisit) {\n                    this.finishVisit(this.activeVisit);\n                }\n\n                if (Object.keys(errors).length > 0) {\n                    const scopedErrors = errorBag ? (errors[errorBag] ? errors[errorBag] : {}) : errors;\n                    return onError(scopedErrors);\n                }\n\n                return reject(error);\n            })\n        });\n    },\n\n    finishVisit(visit) {\n        visit.completed = true;\n        visit.cancelled = false;\n        visit.interrupted = false;\n        visit.onFinish(visit);\n    },\n\n\n    get(url, data = {}, options = {}) {\n        return this.visit(url, Object.assign(Object.assign({}, options), {method: Method.GET, data}));\n    },\n\n    post(url, data = {}, options = {}) {\n        return this.visit(url, Object.assign(Object.assign({preserveState: true}, options), {method: Method.POST, data}));\n    },\n\n    put(url, data = {}, options = {}) {\n        return this.visit(url, Object.assign(Object.assign({preserveState: true}, options), {method: Method.PUT, data}));\n    },\n\n    patch(url, data = {}, options = {}) {\n        return this.visit(url, Object.assign(Object.assign({preserveState: true}, options), {method: Method.PATCH, data}));\n    },\n\n    delete(url, options = {}) {\n        return this.visit(url, Object.assign(Object.assign({preserveState: true}, options), {method: Method.DELETE}));\n    }\n};\n\nexport default function useForm(...args) {\n    const isMounted = useRef(null)\n    const defaults = (typeof args[0] === 'string' ? args[1] : args[0]) || {}\n    const cancelToken = useRef(null)\n    const recentlySuccessfulTimeoutId = useRef(null)\n    const [data, setData] = useState(defaults)\n    const [response, setResponse] = useState({})\n    const [errors, setErrors] = useState({})\n    const [hasErrors, setHasErrors] = useState(false)\n    const [processing, setProcessing] = useState(false)\n    const [progress, setProgress] = useState(null)\n    const [wasSuccessful, setWasSuccessful] = useState(false)\n    const [recentlySuccessful, setRecentlySuccessful] = useState(false)\n\n    let transform = (data) => data\n\n    useEffect(() => {\n        isMounted.current = true\n        return () => {\n            isMounted.current = false\n        }\n    }, [])\n\n    const submit = useCallback(\n        (method, url, options = {}) => {\n            const _options = {\n                ...options,\n                onBefore: (visit) => {\n                    setWasSuccessful(false)\n                    setRecentlySuccessful(false)\n                    clearTimeout(recentlySuccessfulTimeoutId.current)\n\n                    if (options.onBefore) {\n                        return options.onBefore(visit)\n                    }\n                },\n                onStart: (visit) => {\n                    setProcessing(true)\n\n                    if (options.onStart) {\n                        return options.onStart(visit)\n                    }\n                },\n                onProgress: (event) => {\n                    setProgress(event)\n\n                    if (options.onProgress) {\n                        return options.onProgress(event)\n                    }\n                },\n                onSuccess: (response) => {\n                    setResponse(response);\n\n                    if (isMounted.current) {\n                        setProcessing(false)\n                        setProgress(null)\n                        setErrors({})\n                        setHasErrors(false)\n                        setWasSuccessful(true)\n                        setRecentlySuccessful(true)\n                        recentlySuccessfulTimeoutId.current = setTimeout(() => {\n                            if (isMounted.current) {\n                                setRecentlySuccessful(false)\n                            }\n                        }, 2000)\n                    }\n\n                    if (options.onSuccess) {\n                        return options.onSuccess(response)\n                    }\n                },\n                onError: (errors) => {\n                    if (isMounted.current) {\n                        setProcessing(false)\n                        setProgress(null)\n                        setErrors(errors)\n                        setHasErrors(true)\n                    }\n\n                    if (options.onError) {\n                        return options.onError(errors)\n                    }\n                },\n                onCancel: () => {\n                    if (isMounted.current) {\n                        setProcessing(false)\n                        setProgress(null)\n                    }\n\n                    if (options.onCancel) {\n                        return options.onCancel()\n                    }\n                },\n                onFinish: () => {\n                    if (isMounted.current) {\n                        setProcessing(false)\n                        setProgress(null)\n                    }\n\n                    if (options.onFinish) {\n                        return options.onFinish()\n                    }\n                },\n            }\n\n            if (method === 'delete') {\n                return Visitor.delete(url, {..._options, data: transform(data)})\n            } else {\n                return Visitor[method](url, transform(data), _options)\n            }\n        },\n        [data, setErrors],\n    )\n\n    return {\n        data,\n        response,\n        setData(key, value) {\n            if (typeof value === 'object' && 'target' in value && value.target) {\n                value = value.target.value;\n            }\n\n            if (typeof key === 'string') {\n                setData({...data, [key]: value})\n            } else if (typeof key === 'function') {\n                setData(data => key(data))\n            } else {\n                setData(key)\n            }\n\n            return this;\n        },\n        isDirty: !isEqual(data, defaults),\n        errors,\n        hasErrors,\n        processing,\n        progress,\n        wasSuccessful,\n        recentlySuccessful,\n        transform(callback) {\n            transform = callback\n        },\n        reset(...fields) {\n            if (!fields.length) {\n                setData(defaults)\n            } else {\n                setData(\n                    Object.keys(defaults)\n                        .filter((key) => fields.includes(key))\n                        .reduce((carry, key) => {\n                            carry[key] = defaults[key]\n                            return carry\n                        }, {...data}),\n                )\n            }\n        },\n        clearErrors(...fields) {\n            setErrors(\n                Object.keys(errors).reduce(\n                    (carry, field) => ({\n                        ...carry,\n                        ...(fields.length > 0 && !fields.includes(field) ? {[field]: errors[field]} : {}),\n                    }),\n                    {},\n                ),\n            )\n            setHasErrors(Object.keys(errors).length > 0)\n        },\n        submit,\n        get(url, options) {\n            return submit('get', url, options)\n        },\n        post(url, options) {\n            return submit('post', url, options)\n        },\n        put(url, options) {\n            return submit('put', url, options)\n        },\n        patch(url, options) {\n            return submit('patch', url, options)\n        },\n        delete(url, options) {\n            return submit('delete', url, options)\n        },\n        cancel() {\n            if (cancelToken.current) {\n                cancelToken.current.cancel()\n            }\n        },\n    }\n}\n","import * as qs from 'qs';\nimport deepmerge from 'deepmerge';\nimport {Method} from './types';\n\nexport function hrefToUrl(href) {\n    return new URL(href.toString(), window.location.toString());\n}\n\nexport function mergeDataIntoQueryString(method, href, data, qsArrayFormat = 'brackets') {\n    const hasHost = /^https?:\\/\\//.test(href.toString());\n    const hasAbsolutePath = hasHost || href.toString().startsWith('/');\n    const hasRelativePath = !hasAbsolutePath && !href.toString().startsWith('#') && !href.toString().startsWith('?');\n    const hasSearch = href.toString().includes('?') || (method === Method.GET && Object.keys(data).length);\n    const hasHash = href.toString().includes('#');\n    const url = new URL(href.toString(), 'http://localhost');\n    if (method === Method.GET && Object.keys(data).length) {\n        url.search = qs.stringify(deepmerge(qs.parse(url.search, {ignoreQueryPrefix: true}), data), {\n            encodeValuesOnly: true,\n            arrayFormat: qsArrayFormat,\n        });\n        data = {};\n    }\n    return [\n        [\n            hasHost ? `${url.protocol}//${url.host}` : '',\n            hasAbsolutePath ? url.pathname : '',\n            hasRelativePath ? url.pathname.substring(1) : '',\n            hasSearch ? url.search : '',\n            hasHash ? url.hash : '',\n        ].join(''),\n        data,\n    ];\n}\n\nexport function urlWithoutHash(url) {\n    url = new URL(url.href);\n    url.hash = '';\n    return url;\n}\n","export var Method;\n(function (Method) {\n    Method[\"GET\"] = \"get\";\n    Method[\"POST\"] = \"post\";\n    Method[\"PUT\"] = \"put\";\n    Method[\"PATCH\"] = \"patch\";\n    Method[\"DELETE\"] = \"delete\";\n})(Method || (Method = {}));\n","export function hasFiles(data) {\n    return (data instanceof File ||\n        data instanceof Blob ||\n        (data instanceof FileList && data.length > 0) ||\n        (data instanceof FormData && Array.from(data.values()).some((value) => hasFiles(value))) ||\n        (typeof data === 'object' && data !== null && Object.values(data).some((value) => hasFiles(value))));\n}\n","export function objectToFormData(source, form = new FormData(), parentKey = null) {\n    source = source || {};\n    for (const key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n            append(form, composeKey(parentKey, key), source[key]);\n        }\n    }\n    return form;\n}\n\nfunction composeKey(parent, key) {\n    return parent ? parent + '[' + key + ']' : key;\n}\n\nfunction append(form, key, value) {\n    if (Array.isArray(value)) {\n        return Array.from(value.keys()).forEach(index => append(form, composeKey(key, index.toString()), value[index]));\n    } else if (value instanceof Date) {\n        return form.append(key, value.toISOString());\n    } else if (value instanceof File) {\n        return form.append(key, value, value.name);\n    } else if (value instanceof Blob) {\n        return form.append(key, value);\n    } else if (typeof value === 'boolean') {\n        return form.append(key, value ? '1' : '0');\n    } else if (typeof value === 'string') {\n        return form.append(key, value);\n    } else if (typeof value === 'number') {\n        return form.append(key, `${value}`);\n    } else if (value === null || value === undefined) {\n        return form.append(key, '');\n    }\n    objectToFormData(value, form, key);\n}\n","import {useState} from \"react\";\nimport isEqual from \"lodash/isEqual\";\n\nexport default function useData(...args) {\n    const defaults = (typeof args[0] === 'string' ? args[1] : args[0]) || {};\n    const [data, setData] = useState(defaults);\n\n    return {\n        data,\n        reset(...fields): void {\n            if (!fields.length) {\n                setData(defaults)\n            } else {\n                setData(\n                    Object.keys(defaults)\n                        .filter((key) => fields.includes(key))\n                        .reduce((carry, key) => {\n                            carry[key] = defaults[key]\n                            return carry\n                        }, {...data}),\n                )\n            }\n        },\n        setData(key: any, value: any) {\n            if (typeof value === 'object' && 'target' in value && value.target) {\n                value = value.target.value;\n            }\n\n            if (typeof key === 'string') {\n                setData({...data, [key]: value})\n            } else if (typeof key === 'function') {\n                setData(data => key(data))\n            } else {\n                setData(key)\n            }\n\n            return this;\n        },\n        isDirty: !isEqual(data, defaults)\n    }\n}"],"names":[],"version":3,"file":"module.js.map"}